if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Process the uploaded image
    $imageUploadResult = processImage($_FILES['image']);

    if (is_string($imageUploadResult)) {
        // Error message from processImage()
        echo $imageUploadResult;
    } else {
        // Image uploaded successfully, insert user into the database
        $firstname = $_POST['firstname'];
        $lastname = $_POST['lastname'];
        $email = $_POST['email'];
        $phone = $_POST['phone'];
        $password = $_POST['password'];

        $user = new User($firstname, $lastname, $email, $phone, $password, $password);
        $result = $user->addNewUser($firstname, $lastname, $email, $password, $phone, $imageUploadResult);

        if ($result === true) {
            echo "User added successfully.";
        } else {
            echo "Failed to add user.";
        }
    }
}
function processfile($file){
    if(!isset($file['name'] || $file['type'])!==UPLOAD_ERR_OK){
        return 'invalid image'
    }
    $filename=$file['name'];
    $type=$file['type'];
    $size=$file['size'];
    $tempname=$file['temp_name']
    $extension=strtolower(pathinfo($file,PATHINFO_EXTENSION))
    $arrextextensions=['jpg','png']
    if(!in_arry($extension,$arrextextensions)){
        return 'file type not allowed'
    }
    if($size> 500*1024){
        return 'file size too big'
    }
    $targetdir=__DIR__./images/
    if(!file_exists($target_dir)){
        mkdir($targetdir,0777)
    }
    $filetarget=$target_dir.uniqid().$extension
    if(!move_uploaded_file($temp_name,$filetarget)){
        return 'failed to upload file';
    }
    return $targetfile

}
